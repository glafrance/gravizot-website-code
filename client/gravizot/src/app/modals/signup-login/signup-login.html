<div class="dialog-content">
  <h3>{{message()}} <gravizot></gravizot></h3>

  <form [formGroup]="authForm" (ngSubmit)="submit()">
    <div class="control-container">
      <input type="email" formControlName="email" placeholder="enter email address" />
      <div *ngIf="isSignup() && email.invalid && (email.dirty || email.touched)" class="group-error">
        <div *ngIf="isSignup() && email.errors?.['required']">Email is required.</div>
        <div *ngIf="isSignup() && email.errors?.['pattern']">Invalid email format.</div>
      </div>
    </div>

    <div class="control-container">
      <input type="password" formControlName="password" placeholder="enter password" />
      <div *ngIf="isSignup() && password.invalid && (password.dirty || password.touched)" class="group-error">
        <div *ngIf="isSignup() && password.errors?.['required']">Password is required.</div>
        <div *ngIf="isSignup() && password.errors?.['pattern']">8 - 15 characters, at least 1 upper, 1 lower, 1 number, 1 special character</div>
        <div *ngIf="isSignup() && password.errors?.['pattern']">{{allowedCharacters}}</div>
      </div>
    </div>

    <div class="control-container" *ngIf="isSignup()">
      <input type="password" formControlName="confirmPassword" placeholder="confirm password" />
      <div *ngIf="confirmPassword.invalid && (confirmPassword.dirty || confirmPassword.touched)" class="group-error">
        <div *ngIf="confirmPassword.errors?.['required']">Confirm Password is required.</div>
        <div *ngIf="confirmPassword.errors?.['passwordMismatch']">Password and confirm password must match.</div>
      </div>
    </div>

    <div *ngIf="groupPasswordMismatch()" class="group-error">
      Passwords do not match.
    </div>

    <div class="action-container">
      <app-button type="'submit'" [disabled]="authForm.invalid" [label]="submitLabel()"></app-button>
      @if(!isSignup()) {
        <p class="forgot-password" (click)="forgotPassword()">Forgot password</p>
      }
    </div>

    <p class="switch-mode" (click)="toggleMode($event)">{{switchLine()}}</p>
  </form>
</div>

